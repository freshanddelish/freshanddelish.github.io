{"version":3,"sources":["webpack:///./src/pages/search.js","webpack:///./src/components/PageBody.js"],"names":["HeaderOverrides","_ref","title","url","react__WEBPACK_IMPORTED_MODULE_4___default","a","createElement","react_helmet__WEBPACK_IMPORTED_MODULE_7___default","property","content","Search","props","_this","_React$Component","call","this","getOrCreateIndex","index","Index","load","data","siteSearchIndex","autocomplete","event","search","query","target","value","setState","results","expand","fields","boost","tags","map","_ref2","ref","documentStore","getDoc","state","render","config","siteTitle","location","edges","allMarkdownRemark","_components_Layout__WEBPACK_IMPORTED_MODULE_8__","href","_components_Container__WEBPACK_IMPORTED_MODULE_9__","_components_PageBody__WEBPACK_IMPORTED_MODULE_14__","id","type","placeholder","className","onChange","onSubmit","_components_CardList__WEBPACK_IMPORTED_MODULE_11__","page","slug","node","find","edge","_node$frontmatter","frontmatter","featuredImage","excerpt","_components_Card__WEBPACK_IMPORTED_MODULE_10__","key","body","React","Component","styled","section","_templateObject","theme","sizes","maxWidth","PageBody","_babel_runtime_helpers_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0___default","react__WEBPACK_IMPORTED_MODULE_2___default","dangerouslySetInnerHTML","__html","children"],"mappings":"qSAaMA,EAAkB,SAAAC,GAAA,IAAEC,EAAFD,EAAEC,MAAOC,EAATF,EAASE,IAAT,OACtBC,EAAAC,EAAAC,cAACC,EAAAF,EAAD,KACED,EAAAC,EAAAC,cAAA,aAAQJ,GACRE,EAAAC,EAAAC,cAAA,QACEE,SAAS,WACTC,QAASP,IAEXE,EAAAC,EAAAC,cAAA,QAAME,SAAS,SAASC,QAASN,MAG/BO,cACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OACjBA,EAAAC,EAAAC,KAAAC,KAAMJ,IAANI,MAoCFC,iBAAmB,kBAAMJ,EAAKK,MAC1BL,EAAKK,MACLC,QAAMC,KAAKP,EAAKD,MAAMS,KAAKC,gBAAgBJ,QAvC5BL,EAyCnBU,aAAe,SAACC,GAAD,OAAWX,EAAKY,OAAOD,GAAO,IAzC1BX,EA2CnBY,OAAS,SAACD,EAAOD,QAAyB,IAAzBA,OAAe,GAC9B,IAAMG,EAAQF,EAAMG,OAAOC,MAC3Bf,EAAKK,MAAQL,EAAKI,mBAClBJ,EAAKgB,SAAS,CACZH,QACAI,QAASjB,EAAKK,MAAMO,OAAOC,EAAO,CAChCK,OAAQR,EACRS,OAAQ,CACN7B,MAAO,CAAE8B,MAAO,GAChBC,KAAM,CAAED,MAAO,GACfvB,QAAS,CAAEuB,MAAO,MAGnBE,IAAI,SAAAC,GAAA,IACHC,EADGD,EACHC,IADG,OAECxB,EAAKK,MAAMoB,cAAcC,OAAOF,QAxD1CxB,EAAK2B,MAAQ,CACXd,MAAK,GACLI,QAAS,IAJMjB,8BAQnB4B,kBACE,IAAMtC,EAAK,YAAeuC,IAAOC,UACzBC,EAAa5B,KAAKJ,MAAlBgC,SACFC,EAAQ7B,KAAKJ,MAAMS,KAAKyB,kBAAkBD,MAEhD,OACExC,EAAAC,EAAAC,cAACwC,EAAA,EAAD,CAAQ5C,MAAM,UACZE,EAAAC,EAAAC,cAACN,EAAD,CAAiBE,MAAOA,EAAOC,IAAKwC,EAASI,OAE7C3C,EAAAC,EAAAC,cAAC0C,EAAA,EAAD,KACE5C,EAAAC,EAAAC,cAAC2C,EAAA,EAAD,KACE7C,EAAAC,EAAAC,cAAA,SAAO4C,GAAG,SAASC,KAAK,OAAOC,YAAY,YAAYC,UAAU,sDAAsD1B,MAAOZ,KAAKwB,MAAMd,MAAO6B,SAAUvC,KAAKO,aAAciC,SAAUxC,KAAKS,SAC5LpB,EAAAC,EAAAC,cAAA,uDAGFF,EAAAC,EAAAC,cAACkD,EAAA,EAAD,KACGzC,KAAKwB,MAAMV,QAAQK,IAAI,SAAAuB,GAAQ,IACtBC,EAASD,EAATC,KACAC,EAASf,EAAMgB,KAAK,SAAAC,GAAI,OAAIA,EAAKF,KAAK5B,OAAO2B,OAASA,IAAtDC,KAFsBG,EAGGH,EAAKI,YAA9B7D,EAHsB4D,EAGtB5D,MAAO8D,EAHeF,EAGfE,cACPC,EAAYN,EAAZM,QACR,OAAQ7D,EAAAC,EAAAC,cAAC4D,EAAA,EAAD,CAAMC,IAAKT,EAAMvD,IAAKuD,EAAMxD,MAAOA,EAAOkE,KAAMH,EAASD,cAAeA,aA9BzEK,IAAMC,WAgEZ5D,YAER,IAAMe,EAAK,iTClFF8C,IAAOC,QAAVC,IAGE,SAAA9D,GAAK,OAAIA,EAAM+D,MAAMC,MAAMC,WAY3BC,IAPE,SAAA5E,GAAA,IAAGmE,EAAHnE,EAAGmE,KAASzD,EAAZmE,IAAA7E,EAAA,iBACb8E,EAAA1E,EAAAC,cAAA,WACI+C,UAAU,mGACV2B,wBAAyBZ,EAAO,CAACa,OAAQb,GAAQ,MAChDzD,EAAMuE","file":"component---src-pages-search-js-3238e25c0a8de4ddd53a.js","sourcesContent":["import React from 'react'\nimport { Link, graphql } from 'gatsby'\nimport get from 'lodash/get'\nimport Helmet from 'react-helmet'\n\nimport Layout from '../components/Layout'\nimport Container from '../components/Container'\nimport Card from '../components/Card'\nimport CardList from '../components/CardList'\nimport config from '../utils/siteConfig'\nimport {Index} from 'elasticlunr';\nimport PageBody from '../components/PageBody';\n\nconst HeaderOverrides = ({title, url}) => (\n  <Helmet>\n    <title>{title}</title>\n    <meta\n      property=\"og:title\"\n      content={title}\n    />\n    <meta property=\"og:url\" content={url} />\n  </Helmet>);\n\nclass Search extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: ``,\n      results: [],\n    }\n  }\n\n  render() {\n    const title = `Search - ${config.siteTitle}`;\n    const { location } = this.props;\n    const edges = this.props.data.allMarkdownRemark.edges;\n\n    return (\n      <Layout title=\"Search\">\n        <HeaderOverrides title={title} url={location.href} />\n\n        <Container>\n          <PageBody>\n            <input id=\"search\" type=\"text\" placeholder=\"Search...\" className=\"pa2 br3 ba bw1 b--gray lh-title f3 sans-serif w-100\" value={this.state.query} onChange={this.autocomplete} onSubmit={this.search} />\n            <p>Type a search above to see results below:</p>\n          </PageBody>\n\n          <CardList>\n            {this.state.results.map(page => {\n              const { slug } = page;\n              const { node } = edges.find(edge => edge.node.fields.slug === slug);\n              const { title, featuredImage } = node.frontmatter;\n              const { excerpt } = node;\n              return (<Card key={slug} url={slug} title={title} body={excerpt} featuredImage={featuredImage} />);\n            })}\n          </CardList>\n        </Container>\n      </Layout>\n    );\n  }\n\n  getOrCreateIndex = () => this.index\n    ? this.index\n    : Index.load(this.props.data.siteSearchIndex.index);\n  \n  autocomplete = (event) => this.search(event, true)\n\n  search = (event, autocomplete = false) => {\n    const query = event.target.value;\n    this.index = this.getOrCreateIndex();\n    this.setState({\n      query,\n      results: this.index.search(query, {\n        expand: autocomplete,\n        fields: {\n          title: { boost: 3 },\n          tags: { boost: 3 },\n          content: { boost: 1},\n        }\n      })\n        .map(({\n          ref,\n        }) => this.index.documentStore.getDoc(ref)),\n    })\n  }\n}\n\nexport default Search\n\nexport const query = graphql`\n  query {\n    allMarkdownRemark {\n      edges { \n        node { \n          fields {\n            slug\n          }\n          frontmatter { \n            title\n            featuredImage {\n              childImageSharp {\n                fluid(toFormat: JPG) {\n                  ...GatsbyImageSharpFluid\n                }\n              }\n            }\n          }\n          excerpt: excerptHtml\n        }\n      }\n    }\n    siteSearchIndex {\n      index\n    }\n  }\n`\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Link } from 'gatsby'\nimport Img from \"gatsby-image\"\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronCircleRight } from '@fortawesome/free-solid-svg-icons'\n\nconst Wrapper = styled.section`\n  margin: 0 auto auto;\n  width: 100%;\n  max-width: ${props => props.theme.sizes.maxWidth};\n  padding: 3em 1.5em 2em;\n  flex-grow: 1;\n`\n\nconst PageBody = ({ body, ...props }) => (\n    <article \n        className=\"center bg-white br-3 pv1 ph4 nested-copy-line-height lh-copy f4 nested-links mw-100 measure-wide\"\n        dangerouslySetInnerHTML={body ? {__html: body} : null} >\n        {props.children}\n    </article>);\n\nexport default PageBody;"],"sourceRoot":""}